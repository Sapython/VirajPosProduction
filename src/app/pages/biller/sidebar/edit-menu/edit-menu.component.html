<section>
  <!-- <div class="heading">
    <span>
      <button (click)="this.dialogRef.close()">
        <i class="ri-arrow-left-line"></i>
        <p>Back</p>
      </button>
      <h3>Menu Management</h3>
    </span>
    <viraj-button [animated]="true">New Menu</viraj-button>
  </div> -->
  <!-- <div class="sidebar">
    <div class="menus">
      <div class="menu" *ngFor="let menu of menus">
        <div class="head" (click)="menu.toggled = !menu.toggled">
          <p>{{menu.name}}</p>
          <i *ngIf="menu.toggled" class="ri-arrow-down-s-line"></i>
          <i *ngIf="!menu.toggled" class="ri-arrow-up-s-line"></i>
        </div>
        <div class="subItems" *ngIf="menu.toggled">
          <div class="section" (click)="activeTab = 'products'" [ngClass]="{active:activeTab=='products'}">
            <span>Products </span>
            <i class="ri-arrow-right-s-line"></i>
          </div>
          <div class="section" (click)="activeTab = 'taxes'" [ngClass]="{active:activeTab=='taxes'}">
            <span>Taxes </span>
            <i class="ri-arrow-right-s-line"></i>
          </div>
          <div class="section" (click)="activeTab = 'discount'" [ngClass]="{active:activeTab=='discount'}">
            <span>Discounts </span>
            <i class="ri-arrow-right-s-line"></i>
          </div>
          <div class="section" (click)="activeTab = 'combos'" [ngClass]="{active:activeTab=='combos'}">
            <span>Combos </span>
            <i class="ri-arrow-right-s-line"></i>
          </div>
          <div class="section" (click)="activeTab = 'types'" [ngClass]="{active:activeTab=='types'}">
            <span>Combos Types </span>
            <i class="ri-arrow-right-s-line"></i>
          </div>
          <div class="section" (click)="activeTab = 'loyalty'" [ngClass]="{active:activeTab=='loyalty'}">
            <span>Loyalty</span>
            <i class="ri-arrow-right-s-line"></i>
          </div>
        </div>
      </div>
    </div>
  </div> -->
  <div class="tabs">
    <div class="tabList">
      <ng-container *ngFor="let mode of this.dataProvider.menus">
       <button [ngClass]="{active:currentMode==mode.name}" *ngIf="
          (mode.name == 'Takeaway' && this.dataProvider.getAccess('editTakeawayMenu')) ||
          (mode.name == 'Online' && this.dataProvider.getAccess('editOnlineMenu')) ||
          (mode.name == 'Dine In' && this.dataProvider.getAccess('editDineInMenu'))
       "
         (click)="currentMode=mode.name">
         {{mode.name}}
       </button>
      </ng-container>
      <button color="primary" (click)="addNewMenu()" *ngIf="this.dataProvider.getAccess('addNewMenu')">
        Add New Menu
      </button>
    </div>
    <button (click)="this.dialogRef.close();"><i class="ri-close-fill"></i></button>
  </div>
  <ng-container *ngFor="let mode of this.dataProvider.menus">
    <div class="mode" *ngIf="mode.active && mode.name == currentMode">
      <div class="tabs">
        <div class="tabList">
          <button (click)="activeTab='Products'" [ngClass]="{active:activeTab=='Products'}">Products</button>
          <button (click)="activeTab='Taxes'" *ngIf="this.dataProvider.getAccess('seeTaxes')" [ngClass]="{active:activeTab=='Taxes'}">Taxes</button>
          <button (click)="activeTab='Discounts'" *ngIf="this.dataProvider.getAccess('seeDiscount')" [ngClass]="{active:activeTab=='Discounts'}">Discounts</button>
          <button (click)="activeTab='Combos'" *ngIf="this.dataProvider.getAccess('seeCombos')" [ngClass]="{active:activeTab=='Combos'}">Combos</button>
          <button (click)="activeTab='Types'" *ngIf="this.dataProvider.getAccess('seeTypes')" [ngClass]="{active:activeTab=='Types'}">Types</button>
          <button (click)="activeTab='Loyalty'" *ngIf="this.dataProvider.getAccess('seeLoyalty')" [ngClass]="{active:activeTab=='Loyalty'}">Loyalty</button>
        </div>
        <select *ngIf="this.dataProvider.getAccess('switchMenu')" [(ngModel)]="mode.selectedMenuId"
          (change)="mode.updateMenu()" placeholder="Menu">
          <option *ngFor="let menu of this.dataProvider.allMenus" [value]="menu.id">
            {{ menu.name }}
          </option>
        </select>
      </div>
      <div class="productsView" *ngIf="activeTab == 'Products'">
        <ng-container *ngIf="activeTab == 'Products'">
          <div class="sidebar">
            <div class="categories">
              <span *ngIf="this.dataProvider.getAccess('seeAllProducts')">Product List</span>
              <app-category-card [full]="true" *ngIf="this.dataProvider.getAccess('seeAllProducts')" (click)="
            mode.selectCategory(mode.allProductsCategory);
            mode.currentType = 'all'
          " [category]="mode.allProductsCategory"></app-category-card>
              <span *ngIf="this.dataProvider.getAccess('recommendedCategories')">Recommended</span>
              <div cdkDropList *ngIf="this.dataProvider.getAccess('recommendedCategories')" class="example-list"
                (cdkDropListDropped)="mode.reorderRecommendedCategory($event)">
                <app-category-card cdkDrag [full]="true" *ngFor="let category of mode.recommendedCategories" (click)="
                mode.selectCategory(category);
                mode.currentType = 'recommended'
              " [category]="category"></app-category-card>
              </div>
              <span *ngIf="this.dataProvider.getAccess('viewCategories')">View Categories<viraj-button *ngIf="this.dataProvider.getAccess('addViewCategory')" type="icon" (vclick)="mode.addViewCategory()"><i
                    class="ri-add-box-fill"></i></viraj-button></span>
              <div *ngIf="this.dataProvider.getAccess('viewCategories')" cdkDropList class="example-list" (cdkDropListDropped)="mode.reorderViewCategory($event)">
                <app-category-card [full]="true" cdkDrag *ngFor="let category of mode.viewCategories" (click)="
                  mode.selectCategory(category); mode.currentType = 'view'
                " [category]="category"></app-category-card>
              </div>
              <span *ngIf="this.dataProvider.getAccess('mainCategories')">Main Categories</span>
              <div cdkDropList *ngIf="this.dataProvider.getAccess('mainCategories')" class="example-list"
                (cdkDropListDropped)="mode.reorderMainCategory($event)">
                <app-category-card [full]="true" cdkDrag *ngFor="let category of mode.mainCategories" (click)="
                mode.selectCategory(category); mode.currentType = 'root'
              " [category]="category"></app-category-card>
              </div>
            </div>
          </div>
          <div class="main" *ngIf="mode.selectedCategory">
            <div class="title">
              <div class="actions">
                <h2>{{ mode.selectedCategory.name }}</h2>
              </div>
            </div>
            <div class="filters">
              <mat-form-field appearance="outline">
                <mat-label>Search Item</mat-label>
                <input type="text" placeholder="Search Item" matInput (input)="mode.searchSubject.next(text.value)"
                  #text />
              </mat-form-field>
              <ng-container class="actions">
                <ng-container *ngIf="
                  (mode.currentType == 'all' && this.dataProvider.getAccess('enableDisableProducts')) || 
                  (mode.currentType == 'recommended' && this.dataProvider.getAccess('enableDisableRecommendedProducts')) ||
                  (mode.currentType == 'view' && this.dataProvider.getAccess('enableDisableViewProducts')) ||
                  (mode.currentType == 'root' && this.dataProvider.getAccess('enableDisableMainProducts'))
                ">
                  <button mat-stroked-button color="primary" (click)="mode.disableAll()">
                    Disable All
                  </button>
                  <button mat-stroked-button color="primary" (click)="mode.enableAll()">
                    Enable All
                  </button>
                </ng-container>
                <button *ngIf="['all'].includes(mode.currentType) && this.dataProvider.getAccess('addNewProduct')"
                  mat-stroked-button mat-button (click)="mode.addRecipe(mode.selectedMenuId)" color="primary">
                  Add Recipe
                </button>
                <button *ngIf="['view'].includes('editViewCategory')" mat-stroked-button mat-button
                  (click)="mode.addUploadedRecipe()" color="primary">
                  Edit
                </button>
                <button *ngIf="['view'].includes('deleteViewCategory')" mat-stroked-button mat-button
                  (click)="mode.deleteViewCategory()" color="primary">
                  Delete
                </button>
                <mat-menu #menu="matMenu">
                  <button mat-menu-item (click)="mode.addRecipe(mode.selectedMenuId)">
                    New Dish
                  </button>
                  <button mat-menu-item (click)="mode.selectRecipe()">
                    Old Dish
                  </button>
                  <button mat-menu-item>Upload From Excel</button>
                  <button mat-menu-item (click)="mode.getExcelFormat()">
                    Get Excel Format
                  </button>
                </mat-menu>
                <span *ngIf="mode.currentType != 'all'">
                  <mat-slide-toggle color="primary" [(ngModel)]="mode.selectedCategory.enabled"
                    (change)="mode.selectedCategory.updated = true"></mat-slide-toggle>
                </span>
              </ng-container>
            </div>
            <div class="printerSettings"
              *ngIf="mode.currentType == 'root' && this.dataProvider.getAccess(['admin','manager'])">
              <mat-form-field appearance="outline">
                <mat-label>Select Printer</mat-label>
                <mat-select [(ngModel)]="mode.selectedCategory.printer"
                  (selectionChange)="mode.updatePrinter(mode.selectedCategory)" name="printer">
                  <mat-option> Select </mat-option>
                  <mat-option [value]="printer" *ngFor="let printer of printers">
                    {{ printer }}
                  </mat-option>
                </mat-select>
              </mat-form-field>
            </div>
            <div class="filters" *ngIf="this.dataProvider.getAccess('editRecommendedCategorySettings')">
              <h4>Recommendation Setting</h4>
              <ng-container *ngIf="
              ['recommended'].includes(mode.currentType) &&
              mode.selectedCategory.id == 'highRange'
            ">
                <form [formGroup]="mode.highRangeForm" (ngSubmit)="mode.recommendationSave('highRange')">
                  <mat-form-field appearance="outline">
                    <mat-label>Min Price</mat-label>
                    <input type="number" formControlName="min" matInput />
                  </mat-form-field>
                  <mat-form-field appearance="outline">
                    <mat-label>Max Price</mat-label>
                    <input type="number" formControlName="max" matInput />
                  </mat-form-field>
                  <button color="primary" mat-flat-button *ngIf="mode.highRangeForm.touched">
                    Save
                  </button>
                </form>
              </ng-container>
              <ng-container *ngIf="
              ['recommended'].includes(mode.currentType) &&
              mode.selectedCategory.id == 'lowRange'
            ">
                <form [formGroup]="mode.lowRangeForm" (ngSubmit)="mode.recommendationSave('lowRange')">
                  <mat-form-field appearance="outline">
                    <mat-label>Min Price</mat-label>
                    <input type="number" matInput formControlName="min" />
                  </mat-form-field>
                  <mat-form-field appearance="outline">
                    <mat-label>Max Price</mat-label>
                    <input type="number" matInput formControlName="max" />
                  </mat-form-field>
                  <button color="primary" mat-flat-button *ngIf="mode.lowRangeForm.touched">
                    Save
                  </button>
                </form>
              </ng-container>
              <ng-container *ngIf="
              ['recommended'].includes(mode.currentType) &&
              mode.selectedCategory.id == 'mostSelling'
            ">
                <form [formGroup]="mode.mostSellingForm" (ngSubmit)="mode.recommendationSave('mostSelling')">
                  <mat-form-field appearance="outline">
                    <mat-label>Min Sales</mat-label>
                    <input type="number" matInput formControlName="min" />
                  </mat-form-field>
                  <mat-form-field appearance="outline">
                    <mat-label>Max Sales</mat-label>
                    <input type="number" matInput formControlName="max" />
                  </mat-form-field>
                  <button color="primary" mat-flat-button *ngIf="mode.mostSellingForm.touched">
                    Save
                  </button>
                </form>
              </ng-container>
              <ng-container *ngIf="
              ['recommended'].includes(mode.currentType) &&
              mode.selectedCategory.id == 'newDishes'
            ">
                <form [formGroup]="mode.newDishesForm" (ngSubmit)="mode.recommendationSave('newDishes')">
                  <mat-form-field appearance="outline">
                    <mat-label>Minimum date *</mat-label>
                    <input matInput [matDatepicker]="minPicker" required formControlName="min" />
                    <mat-hint>MM/DD/YYYY</mat-hint>
                    <mat-datepicker-toggle matIconSuffix [for]="minPicker"></mat-datepicker-toggle>
                    <mat-datepicker #minPicker></mat-datepicker>
                  </mat-form-field>
                  <mat-form-field appearance="outline">
                    <mat-label>Maximum date (Optional)</mat-label>
                    <input matInput [matDatepicker]="picker" formControlName="max" />
                    <mat-hint>MM/DD/YYYY</mat-hint>
                    <mat-datepicker-toggle matIconSuffix [for]="picker"></mat-datepicker-toggle>
                    <mat-datepicker #picker></mat-datepicker>
                  </mat-form-field>
                  <button color="primary" mat-flat-button *ngIf="mode.newDishesForm.touched">
                    Save
                  </button>
                </form>
              </ng-container>
            </div>
            <div class="productList">
              <p>Total {{ mode.selectedCategory.products.length }} Products</p>
              <mat-spinner mode="indeterminate" *ngIf="mode.selectedCategory.loading"></mat-spinner>
              <div class="productList" cdkDropList (cdkDropListDropped)="mode.reorderProduct($event)">
                <div cdkDrag class="product" *ngFor="
                let product of mode.filteredProducts.length > 0
                  ? mode.filteredProducts
                  : mode.selectedCategory.products
              ">
                  <p>{{ product.name }}</p>
                  <div class="pricing">
                    <strong>{{ product.price | currency : "INR" }}</strong>
                    <span *ngIf="!(product.taxes && product.taxes.length > 0)" class="danger">No Taxes</span>
                    <viraj-button *ngIf="
                    (mode.currentType == 'all' && this.dataProvider.getAccess('setTaxesOnProducts')) || 
                    (mode.currentType == 'recommended' && this.dataProvider.getAccess('setTaxesOnRecommendedProducts')) ||
                    (mode.currentType == 'view' && this.dataProvider.getAccess('setTaxesOnViewProducts')) ||
                    (mode.currentType == 'root' && this.dataProvider.getAccess('setTaxesOnMainProducts'))
                    "
                      (click)="mode.setTaxes(product)">Set Taxes</viraj-button>
                    <mat-slide-toggle checked
                      *ngIf="
                      (mode.currentType == 'all' && this.dataProvider.getAccess('enableDisableProducts')) || 
                      (mode.currentType == 'recommended' && this.dataProvider.getAccess('enableDisableRecommendedProducts')) ||
                      (mode.currentType == 'view' && this.dataProvider.getAccess('enableDisableViewProducts')) ||
                      (mode.currentType == 'root' && this.dataProvider.getAccess('enableDisableMainProducts'))
                      "
                      [(ngModel)]="product.visible" (toggleChange)="
                    mode.productVisibilityChanged = true;
                    product.updated = true;
                    mode.selectedCategory.updated = true;
                  "></mat-slide-toggle>
                    <viraj-button *ngIf="
                    (mode.currentType == 'all' && this.dataProvider.getAccess('editProduct')) || 
                    (mode.currentType == 'recommended' && this.dataProvider.getAccess('editRecommendedProduct')) ||
                    (mode.currentType == 'view' && this.dataProvider.getAccess('editViewProduct')) ||
                    (mode.currentType == 'root' && this.dataProvider.getAccess('editMainProduct'))"
                      (click)="mode.editRecipe(product, mode.selectedMenuId)">
                      <i class="ri-pencil-fill"></i>
                    </viraj-button>
                    <viraj-button
                      *ngIf="
                      (mode.currentType == 'all' && this.dataProvider.getAccess('deleteProduct')) || 
                      (mode.currentType == 'recommended' && this.dataProvider.getAccess('deleteRecommendedProduct')) ||
                      (mode.currentType == 'view' && this.dataProvider.getAccess('deleteViewProduct')) ||
                      (mode.currentType == 'root' && this.dataProvider.getAccess('deleteMainProduct'))
                      "
                      (click)="mode.deleteRecipe(product,mode.selectedMenuId)">
                      <i class="ri-delete-bin-6-fill"></i>
                    </viraj-button>
                  </div>
                </div>
                <mat-paginator *ngIf="mode.filteredProducts.length == 0 && mode.currentType == 'all'"
                  [length]="mode.products.length" [pageSize]="10" [pageSizeOptions]="[5, 10, 25, 100]"
                  (page)="mode.pageChanged($event)" aria-label="Select page">
                </mat-paginator>
              </div>
            </div>
          </div>
        </ng-container>
      </div>
      <div class="tableView">
        <ng-container *ngIf="activeTab == 'Taxes'">
          <h3>Taxes</h3>
          <div class="row">
            <mat-form-field appearance="outline">
              <mat-label>Search</mat-label>
              <input matInput (input)="mode.taxesSearchSubject.next(search.value)" #search/>
            </mat-form-field>
            <viraj-button (vclick)="mode.addTax()" *ngIf="this.dataProvider.getAccess('addNewTaxes')">Add Tax</viraj-button>
          </div>
          <p>Total {{mode.taxes.length}} taxes</p>
          <div class="tableContainer">
            <table>
              <thead>
                <tr>
                  <th>Tax Name</th>
                  <th>Tax Cost</th>
                  <th>Type</th>
                  <th>Mode</th>
                  <th>Add Date</th>
                  <th>Update Date</th>
                  <th>Actions</th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let tax of mode.filteredTaxes.length ? mode.filteredTaxes : mode.taxes">
                  <td>{{ tax.name }}</td>
                  <td>{{ tax.cost }}</td>
                  <td>{{ tax.type | titlecase }}</td>
                  <td>{{ tax.mode | titlecase }}</td>
                  <td>{{ tax.creationDate.toDate() | date }}</td>
                  <td>{{ tax.updateDate.toDate() | date }}</td>
                  <td>
                    <viraj-button *ngIf="this.dataProvider.getAccess('editTaxes')" (vclick)="mode.editTax(tax)" type="icon"><i class="ri-pencil-line"></i></viraj-button>
                    <viraj-button ngIf="this.dataProvider.getAccess('deleteTaxes')" (vclick)="mode.deleteTax(tax.id)" type="icon"><i
                        class="ri-delete-bin-line"></i></viraj-button>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </ng-container>
        <ng-container *ngIf="activeTab == 'Discounts'">
          <h3>Discounts</h3>
          <div class="row">
            <mat-form-field appearance="outline">
              <mat-label>Search</mat-label>
              <input matInput (input)="mode.discountsSearchSubject.next(search.value)" #search />
            </mat-form-field>
            <viraj-button (vclick)="mode.addDiscount()" *ngIf="this.dataProvider.getAccess('addNewDiscounts')">Add Discount</viraj-button>
          </div>
          <div class="tableContainer">
            <table>
              <thead>
                <tr>
                  <th>Name</th>
                  <th>Value</th>
                  <th>Type</th>
                  <th>Min Amount</th>
                  <th>Min Products</th>
                  <th>Max Discount</th>
                  <th>Created On</th>
                  <th>Menus</th>
                  <th>Access</th>
                  <th>Action</th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let discount of mode.filteredDiscounts.length ? mode.filteredDiscounts : mode.discounts">
                  <td>{{ discount.name }}</td>
                  <td>{{ discount.value }}</td>
                  <td>{{ discount.type }}</td>
                  <td>{{ discount.minimumAmount }}</td>
                  <td>{{ discount.minimumProducts }}</td>
                  <td>{{ discount.maximumDiscount }}</td>
                  <td>
                    {{
                    discount.creationDate
                    ? (discount.creationDate.toDate() | date)
                    : "N/A"
                    }}
                  </td>
                  <td>
                    <li *ngFor="let item of mode.getMappedMenu(discount.menus)">
                      {{ item.name }}
                    </li>
                  </td>
                  <td>
                    <li *ngFor="let item of discount.accessLevels">
                      {{ item }}
                    </li>
                  </td>
                  <td>
                    <viraj-button *ngIf="this.dataProvider.getAccess('editDiscount')" (vclick)="mode.editDiscount(discount)" type="icon"><i
                        class="ri-pencil-fill"></i></viraj-button>
                    <viraj-button *ngIf="this.dataProvider.getAccess('deleteDiscounts')" (vclick)="mode.deleteDiscount(discount.id)" type="icon"><i
                        class="ri-delete-bin-2-fill"></i></viraj-button>
                  </td>
                </tr>
                <tr *ngIf="mode.loadingDiscount">
                  <td colspan="8">
                    <mat-spinner mode="indeterminate"> </mat-spinner>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </ng-container>
        <ng-container *ngIf="activeTab == 'Types'">
          <h3>Types</h3>
          <div class="row">
            <mat-form-field appearance="outline">
              <mat-label>Search</mat-label>
              <input matInput (input)="mode.typeSearchSubject.next(search.value)" #search />
            </mat-form-field>
            <viraj-button *ngIf="this.dataProvider.getAccess('addNewTypes')" (vclick)="mode.addType()">Add Type</viraj-button>
          </div>
          <div class="tableContainer typesTable">
            <table>
              <thead>
                <tr>
                  <th>Image</th>
                  <th>Name</th>
                  <th>Action</th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let type of mode.filteredTypes.length ? mode.filteredTypes : mode.types" class="type">
                  <td><img [src]="type.image"></td>
                  <td>{{ type.name }}</td>
                  <td>
                    <viraj-button *ngIf="this.dataProvider.getAccess('editTypes')" (vclick)="mode.editType(type)" type="icon"><i
                        class="ri-pencil-fill"></i></viraj-button>
                    <viraj-button *ngIf="this.dataProvider.getAccess('deleteTypes')" (vclick)="mode.deleteType(type)" type="icon"><i
                        class="ri-delete-bin-2-fill"></i></viraj-button>
                  </td>
                </tr>
                <tr *ngIf="mode.loadingComboTypes">
                  <td colspan="8">
                    <mat-spinner mode="indeterminate"> </mat-spinner>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </ng-container>
        <ng-container *ngIf="activeTab == 'Combos'">
          <h3>All Combos</h3>
          <div class="comboCards">
            <div class="card new" *ngIf="this.dataProvider.getAccess('addNewCombos')" (click)="mode.addCombo()">
              <p><i class="ri-add-fill"></i>Add New Combo</p>
            </div>
            <div class="card combo" *ngFor="let combo of mode.combos">
              <img [src]="combo.offerImage">
              <p>{{combo.name}}</p>
            </div>
            <div class="card new" *ngIf="mode.combos.length > 10 && this.dataProvider.getAccess('addNewCombos')">
              <p><i class="ri-add-fill"></i>Add New Combo</p>
            </div>
          </div>
        </ng-container>
      </div>
      <div class="loyaltySettings" *ngIf="activeTab == 'Loyalty'">
        <h2>Loyalty Settings</h2>
        <div class="settings">
          <div class="heading">
            <h3>All Settings</h3>
            <div class="actions">
              <mat-form-field>
                <mat-label>Base Loyalty Rate</mat-label>
                <input type="number" matInput placeholder="Loyalty Rate per inr">
              </mat-form-field>
              <mat-form-field>
                <mat-label>Base Expiry Days</mat-label>
                <input type="number" matInput placeholder="Days in number">
              </mat-form-field>
              <viraj-button *ngIf="this.dataProvider.getAccess('addNewLoyaltySettings')" (vclick)="mode.addLoyaltySettings()">Add New</viraj-button>
            </div>
          </div>
          <div class="setting" *ngFor="let setting of mode.loyaltySettings; let i = index;">
            <div class="head">
              <h3>{{setting.name}}</h3>
            </div>
            <div class="body">
              <form [formGroup]="setting.newLoyaltyForm">
                <mat-form-field>
                  <mat-label>Setting Name</mat-label>
                  <input formControlName="name" type="text" matInput>
                </mat-form-field>
                <mat-form-field>
                  <mat-label>Select Time Group</mat-label>
                  <mat-select formControlName="timeGroup" placeholder="Select Time Group" name="group">
                    <mat-option *ngFor="let group of mode.timeGroups" [value]="group.id">
                      {{group.name}}
                    </mat-option>
                  </mat-select>
                </mat-form-field>
              </form>
              <div class="products">
                <div class="product" *ngFor="let item of setting.products">
                  <mat-checkbox [(ngModel)]="item.selected">{{item.name}}</mat-checkbox>
                  <input type="number" [(ngModel)]="item.loyaltyPoint" placeholder="Loyalty Point">
                  <input type="number" [(ngModel)]="item.expiryInDays" placeholder="Expiry in days">
                </div>
              </div>
              <div class="actions">
                <viraj-button (click)="mode.saveLoyaltySetting(setting)">Save</viraj-button>
                <viraj-button (click)="mode.cancelLoyaltySetting(setting,i)" type="outline">Cancel</viraj-button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </ng-container>
  <div class="actions">
    <button color="primary" mat-flat-button (click)="this.dialogRef.close()">Save</button>
  </div>
</section>